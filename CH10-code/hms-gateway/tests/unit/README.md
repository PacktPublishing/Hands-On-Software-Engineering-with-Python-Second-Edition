# HMS Unit Test Policies

The unit test suite should execute without error when run
from the project root directory with

```shell
pipenv run pytest tests/unit
```

Code-coverage reports can be generated by running these
commands, also from the project root:

```shell
pipenv run coverage run pytest tests/unit
pipenv run coverage report
```

> **NOTE:** Coverage should *not* be used as a criteria to
> determine whether a given version of this package can be
> released or not!

## Goals and expectations for unit tests

- Test elements may be written using either unittest or
  pytest constructs.
- Unit tests will be written for all code elements in the
  project’s source code.
- Unit tests that rely on external resources, particularly
  data storage, will use patching and mocking so that no
  actual connections are created or needed.
- Unit tests are not expected to patch or mock code entities’
  calls or results if those entities are part of the project
  unless they fall into an external resources category.
- Unit tests may be skipped if they cannot yield meaningful
  test results. Any skipped test code must provide a reason
  that it was skipped.
- Unit tests will at least make an attempt to execute all
  reasonable combinations of happy path values, with the
  expectation that each of those combinations, passed to
  the test-target, will execute without error, and yield
  expected results.
- They will also execute a similar set of reasonable
  combinations of unhappy path executions, each of which is
  expected to raise some type of predictable error, raising
  a test failure if the expected error does not occur.
- Code coverage reporting will be used to identify code that
  has not been executed during the execution of a test suite,
  and efforts will be made to address any substantial gaps,
  but coverage will not be used as criteria for whether code
  can be released.
